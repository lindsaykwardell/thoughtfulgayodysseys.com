---
import { useStoryblokApi } from "@storyblok/astro";
import Post from "@/storyblok/Post.astro";

export async function getStaticPaths() {
  const storyblokApi = useStoryblokApi();

  const { data } = await storyblokApi.get("cdn/stories", {
    version: import.meta.env.DEV ? "draft" : "published",
  });

  return data.stories.map((blok) => ({
    params: { slug: blok.slug },
    props: { blok },
  }));
}
const { blok } = Astro.props;
---

<Post blok={blok} />
